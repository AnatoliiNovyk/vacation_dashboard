---
id: ARCH-APP-manager-logic
title: "Логіка: Панель Менеджера"
type: component
layer: application
owner: "@unassigned"
version: v1
status: current
created: 2025-06-02
updated: 2025-06-02
tags: [app, logic, manager, dashboard, callbacks, subordinate_management, vacation_viewing, dash]
depends_on: [ARCH-DATA-storage, ARCH-UTIL-date, ARCH-APP-core-routing-auth]
referenced_by: []
---
## Контекст
Цей компонент інкапсулює бізнес-логіку та обробку взаємодій для Панелі Менеджера. Він фокусується на відображенні інформації про відпустки підлеглих співробітників та особистих відпустках менеджера.

## Структура
*   **Розташування:** `app.py` (секція callback-функцій для Менеджера)
*   **Ключові Callback-функції:**
    *   **Відображення Даних Підлеглих:**
        *   `update_subordinates_table`: Заповнює таблицю підлеглих (`manager-subordinates-table`) даними з `db_operations.get_subordinates_for_manager_table()`. Відображає список підлеглих з їх ПІБ, ІПН, ролями та інформацією про відпустки.
        *   `update_subordinate_vacation_details`: Оновлює деталі відпустки для вибраного підлеглого. Викликається при виборі співробітника з таблиці підлеглих.
    *   **Особисті Відпустки:**
        *   `display_manager_personal_vacation_details`: Відображає особисті дані про відпустку для самого менеджера, включаючи загальну кількість днів відпустки, використані дні та залишок.
    *   **Фільтрація та Сортування:**
        *   `filter_subordinates_table`: Дозволяє фільтрувати таблицю підлеглих за різними параметрами (ПІБ, ІПН, роль, статус відпустки).
        *   `sort_subordinates_table`: Дозволяє сортувати таблицю підлеглих за різними колонками.

## Поведінка
### Перегляд Підлеглих
*   Менеджер бачить список всіх своїх підлеглих з їх основними даними.
*   Для кожного підлеглого відображається:
    *   ПІБ
    *   ІПН
    *   Роль
    *   Загальна кількість днів відпустки на рік
    *   Використані дні відпустки
    *   Залишок днів відпустки
    *   Статус поточної відпустки (якщо є)

### Деталі Відпустки Підлеглого
*   При виборі конкретного підлеглого з таблиці, система відображає детальну інформацію про його відпустки:
    *   Історія відпусток за поточний рік
    *   Деталі поточної відпустки (якщо є)
    *   Прогнозований залишок днів

### Особисті Відпустки
*   Менеджер може переглядати власні дані про відпустки:
    *   Загальна кількість днів відпустки на рік
    *   Використані дні
    *   Залишок днів
    *   Історія власних відпусток

### Фільтрація та Сортування
*   Менеджер може фільтрувати список підлеглих за:
    *   ПІБ (пошук по частині імені)
    *   ІПН
    *   Роллю
    *   Статусом відпустки (відпустка, без відпустки)
*   Можливість сортування таблиці за будь-якою колонкою для зручного перегляду даних.

## Еволюція
### Заплановано
— Додавання можливості експорту даних про відпустки підлеглих.
— Розширення функціоналу фільтрації та сортування.
— Додавання графіків та статистики по відпустках підлеглих.
### Історичне
— v1: Реалізація базового функціоналу перегляду даних підлеглих та особистих відпусток, включаючи фільтрацію та сортування. 